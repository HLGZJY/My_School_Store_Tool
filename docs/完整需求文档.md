# 校园信息聚合小程序 - 完整需求文档

## 项目概述

**项目名称**：校园信息聚合小程序
**项目类型**：微信小程序（个人备案）
**目标用户**：高校在校学生、教职工
**核心价值**：聚合校园公开信息，提供智能分类和个性化推荐

---

## 一、功能范围界定（个人备案合规性说明）

### 1.1 数据来源合规性

个人备案小程序的合法数据来源：

| 数据类型 | 合规来源 | 不合规来源 |
|---------|---------|-----------|
| 通知公告 | 互联网公开RSS、学校公开API、手动录入 | 爬虫采集非公开内容 |
| 学术讲座 | 公开的活动报名页面、手动录入 | 采集需要登录的内容 |
| 社团活动 | 公开的社团官网/公众号（可转载内容） | 采集受限内容 |
| 生活服务 | 公开的官方信息、手动录入 | 非授权API调用 |

### 1.2 功能限制对照表

| 功能模块 | 个人备案支持情况 | 替代方案 |
|---------|----------------|---------|
| 微信登录 | ✅ 支持 | 使用 wx.login + getUserProfile |
| 消息推送 | ❌ 不支持主动推送 | 改为用户主动查看 + 红点提示 |
| 模板消息 | ❌ 不支持 | 使用"我的-消息"页查看 |
| 订阅消息 | ❌ 不支持 | 提供"订阅源"列表，用户主动查看 |
| 云开发 | ✅ 支持 | 完全可以使用 |
| 支付功能 | ❌ 不支持 | 无需支付功能 |

---

## 二、用户角色与权限体系

### 2.1 角色定义

| 角色 | 核心关注点 | 推荐优先级 |
|-----|-----------|-----------|
| 在校学生 | 课程通知、社团活动、学术讲座、就业信息 | 按专业、年级、兴趣标签推送 |
| 教师 | 教务通知、科研申报、学术会议、行政流程 | 按院系、职称、研究方向推送 |
| 行政人员 | 校内公文、会议通知、政策文件、工作简报 | 按部门职能、紧急程度排序 |

### 2.2 权限矩阵

| 功能 | 未登录 | 学生 | 教师 | 行政人员 |
|-----|--------|------|------|----------|
| 浏览首页信息流 | ✅ | ✅ | ✅ | ✅ |
| 搜索内容 | ✅ | ✅ | ✅ | ✅ |
| 查看详情页 | ✅ | ✅ | ✅ | ✅ |
| 收藏文章 | ❌ 需登录 | ✅ | ✅ | ✅ |
| 查看阅读历史 | ❌ 需登录 | ✅ | ✅ | ✅ |
| 切换角色 | ❌ 需登录 | ❌ | ❌ | ❌ |
| 管理订阅源 | ❌ 需登录 | ✅ | ✅ | ✅ |

### 2.3 角色选择流程

```
首次进入
    ↓
检查是否有已保存角色
    ↓ 否
弹出角色选择弹窗（单选）
    ↓
保存选择到云数据库
    ↓
跳转首页
```

---

## 三、信息分类体系

### 3.1 一级分类（Tab导航）

| 分类 | 图标 | 描述 | 优先级排序规则 |
|-----|------|------|---------------|
| 通知公告 | bell | 紧急通知、重要公告、一般通知 | 紧急 > 重要 > 一般 |
| 学术动态 | book | 讲座、会议、成果发布、科研申报 | 时间倒序 + 热度 |
| 社团活动 | users | 招新、比赛、演出、志愿活动 | 时间倒序 + 报名热度 |
| 生活服务 | home | 后勤、图书馆、就业、心理、医疗 | 按用户偏好排序 |

### 3.2 二级标签系统

**来源标签**（用于筛选内容来源）：
- 教务处、研究生院、学生处
- 各学院（如计算机学院、经管学院等）
- 图书馆、后勤处、保卫处
- 社团联合会、各类学生社团

**紧急标签**（用于视觉标识）：
- 📍 置顶24小时 - 红色背景标签
- ⏰ 本周截止 - 橙色背景标签
- 🎯 即将开始 - 黄色背景标签

**角色标签**（用于权限过滤）：
- 本科生专用、研究生专用、教职工专用
- 通用（无角色限制）

### 3.3 标签规则

每篇文章必须包含：
- ✅ 至少1个一级分类
- ✅ 至少1个来源标签
- ✅ 至少1个角色标签（"通用"也算）

---

## 四、核心功能详细规格

### 4.1 首页 - 信息瀑布流

#### 4.1.1 布局结构

```
┌─────────────────────────────────┐
│  🔍 搜索通知、讲座、活动...     │ 搜索栏
├─────────────────────────────────┤
│ [全部] [通知] [学术] [社团] [服务] Tab栏
├─────────────────────────────────┤
│  💡 猜你需要                     │
│  ┌─────────────────────────┐    │ 智能推荐区
│  │ 推荐卡片1               │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 推荐卡片2               │    │
│  └─────────────────────────┘    │
├─────────────────────────────────┤
│  ┌─────────────────────────┐    │
│  │ 标题（最多2行）          │    │
│  │ 来源 | 时间 | [标签]     │    │ 信息卡片
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 标题（最多2行）          │    │
│  │ 来源 | 时间 | [标签]     │    │
│  └─────────────────────────┘    │
│  ...                            │
└─────────────────────────────────┘
```

#### 4.1.2 搜索功能

| 功能 | 说明 | 技术实现 |
|-----|------|---------|
| 关键词搜索 | 搜索标题、正文内容 | 云数据库正则查询 |
| 搜索高亮 | 关键词在结果中高亮显示 | 富文本处理 |
| 历史记录 | 保存最近10条搜索记录 | 本地缓存 |
| 热搜推荐 | 展示前5个高频搜索词 | 云数据库聚合统计 |

#### 4.1.3 信息卡片规格

```
┌─────────────────────────────┐
│ [📍] 关于期末考试安排的通知  │ 紧急标签 + 标题（16px, 600）
│ 教务处 | 今天 14:30           │ 来源 + 时间（12px, 灰色）
│ [📢] [本科]                 │ 角色标签
└─────────────────────────────┘

尺寸: 宽度100%, 高度自适应
背景: 纯白 #FFFFFF
圆角: 8px
阴影: 0 2px 8px rgba(10,37,64,0.04)
内边距: 16px
外边距: 8px 16px
```

#### 4.1.4 智能推荐算法

```javascript
// 推荐权重计算伪代码
function calculateRecommendationScore(article, user) {
    let score = 0;

    // 角色匹配 (+30分)
    if (article.roleTag.includes(user.role)) {
        score += 30;
    }

    // 浏览历史 (+20分)
    if (user.history.includes(article.category)) {
        score += 20;
    }

    // 时间敏感度 (+25分)
    if (article.urgency === 'high') {
        score += 25;
    } else if (article.urgency === 'medium') {
        score += 15;
    }

    // 热度 (+15分)
    score += Math.min(article.viewCount / 100, 15);

    // 新鲜度 (+10分)
    const hoursSincePublish = (Date.now() - article.publishTime) / 3600000;
    if (hoursSincePublish < 24) {
        score += 10;
    }

    return score;
}
```

#### 4.1.5 交互说明

| 交互 | 效果 |
|-----|------|
| 下拉刷新 | 显示加载动画，获取最新内容 |
| 上拉加载 | 每次加载15条，显示"加载中"提示 |
| 左滑卡片 | 显示收藏按钮，点击后收藏并震动反馈 |
| 点击卡片 | 跳转详情页，记录阅读历史 |
| 点击Tab | 切换分类，保留滚动位置 |

---

### 4.2 发现页 - 聚合浏览

#### 4.2.1 布局结构

```
┌─────────────────────────────────┐
│  发现               🔔 消息(3)   │ 标题栏
├─────────────────────────────────┤
│  🔥 热门排行                      │ 模块标题
│  ┌───┬───┬───┬───┬───┐          │
│  │ 1 │ 2 │ 3 │ 4 │ 5 │          │ Top 5
│  └───┴───┴───┴───┴───┘          │
│  [查看更多]                      │
├─────────────────────────────────┤
│  🏷️ 标签云                       │ 模块标题
│  [考试] [讲座] [招新] [图书馆]   │ 随机标签
│  ...                             │
├─────────────────────────────────┤
│  📅 时间轴                       │ 模块标题
│  02-09 (12篇) ▼                 │ 可展开
│  02-08 (8篇)  ▼                 │ 可展开
│  ...                             │
├─────────────────────────────────┤
│  📑 订阅管理                     │ 模块标题
│  ✓ 教务处                        │ 已订阅
│  ✓ 计算机学院                    │ 已订阅
│  + 经管学院                      │ 可订阅
│  [系统推荐]                      │ 按钮
└─────────────────────────────────┘
```

#### 4.2.2 热门排行

| 排行维度 | 更新频率 | 展示数量 |
|---------|---------|---------|
| 近7天阅读量 | 每小时 | 前20篇 |
| 近7天收藏量 | 每小时 | 前20篇 |
| 近7天分享量 | 每小时 | 前20篇 |

#### 4.2.3 标签云

- 基于已采集文章自动提取高频标签
- 字号随标签使用频率放大（12px - 18px）
- 点击标签进入该标签的内容筛选页
- 标签颜色使用主色调不同透明度

#### 4.2.4 时间轴

```
展开状态:
  02-09 (12篇)
    ├─── 09:30 期末考试安排通知
    ├─── 08:00 图书馆开放时间调整
    └─── ...

折叠状态:
  02-09 (12篇)
```

#### 4.2.5 订阅管理

| 订阅源类型 | 示例 | 操作 |
|-----------|------|------|
| 学院官网 | 订阅/取消订阅 | 立即生效 |
| 公众号 | 订阅/取消订阅 | 立即生效 |
| 部门 | 订阅/取消订阅 | 立即生效 |

---

### 4.3 详情页

#### 4.3.1 布局结构

```
┌─────────────────────────────────┐
│ ← 详情           ⭐ [分享]       │ 导航栏
├─────────────────────────────────┤
│ 关于期末考试安排的通知           │ 标题
│ ────────────────────            │ 分割线
│ [📍紧急] [教务处] [本科]        │ 标签栏
│ 2024-02-09 14:30 | 阅读 1,234   │ 元信息
├─────────────────────────────────┤
│  AI 摘要:                      │
│  本通知包含...                 │ 摘要区域（可收起）
│  ┌─────────────────────────┐    │
│  │    原文内容             │    │
│  │    ...                 │    │ 富文本渲染
│  └─────────────────────────┘    │
├─────────────────────────────────┤
│ 你可能还想看                     │ 推荐标题
│ ┌─────────────────────────┐    │
│ │ 相关推荐文章1           │    │ 推荐卡片
│ └─────────────────────────┘    │
│ ┌─────────────────────────┐    │
│ │ 相关推荐文章2           │    │
│ └─────────────────────────┘    │
├─────────────────────────────────┤
│      [收藏]   [打开原文]        │ 底部操作栏
└─────────────────────────────────┘
```

#### 4.3.2 内容渲染规范

| 内容类型 | 处理方式 |
|---------|---------|
| 纯文本 | 直接渲染 |
| 图片 | 保留原文链接，懒加载 |
| 链接 | 转换为可点击链接 |
| 视频 | 显示"查看原文"按钮 |
| 表格 | 简化展示或显示"查看原文" |

#### 4.3.3 AI摘要

- 使用Moonshot API生成摘要
- 摘要长度控制在100-200字
- 用户可点击展开/收起摘要
- 摘要包含关键信息：时间、地点、注意事项

#### 4.3.4 相关推荐逻辑

```javascript
function getRelatedArticles(currentArticle, allArticles) {
    return allArticles
        .filter(article => {
            // 排除当前文章
            if (article._id === currentArticle._id) return false;

            // 相同分类 (+40分)
            const categoryMatch = article.category === currentArticle.category;

            // 有共同标签 (+30分)
            const tagMatch = article.tags.some(tag =>
                currentArticle.tags.includes(tag)
            );

            // 时间相近 (±7天) (+20分)
            const timeDiff = Math.abs(
                article.publishTime - currentArticle.publishTime
            );
            const timeNear = timeDiff < 7 * 24 * 60 * 60 * 1000;

            return categoryMatch || tagMatch || timeNear;
        })
        .sort((a, b) => b.publishTime - a.publishTime)
        .slice(0, 3);
}
```

#### 4.3.5 底部操作栏

| 按钮 | 点击效果 |
|-----|---------|
| 收藏 | 切换收藏状态 + 震动反馈 |
| 打开原文 | 站内链接直接跳转，站外链接弹窗确认 |

---

### 4.4 我的页面

#### 4.4.1 布局结构

```
┌─────────────────────────────────┐
│  我的                            │ 标题
├─────────────────────────────────┤
│  ┌───┬───┬───┐                  │ 用户信息区
│  │头像│ 用户名                  │
│  └───┴───┴───┘                  │
│  身份: 本科生 | 计算机学院        │
│  ┌─────────────────────────┐    │
│  │      [切换身份]          │    │ 可切换
│  └─────────────────────────┘    │
├─────────────────────────────────┤
│  📚 我的收藏 (28) >              │ 收藏夹入口
│  📖 阅读历史 (50) >              │ 历史入口
│  📢 消息通知 (3) >               │ 消息入口（红点）
│  ⚙️ 设置 >                       │ 设置入口
└─────────────────────────────────┘
```

#### 4.4.2 我的收藏

| 功能 | 说明 |
|-----|------|
| 分类筛选 | 按一级分类、标签筛选 |
| 搜索收藏 | 搜索收藏文章标题 |
| 批量管理 | 勾选多个文章批量取消收藏 |
| 排序 | 收藏时间倒序/正序 |
| 分页 | 每页20条 |

#### 4.4.3 阅读历史

| 功能 | 说明 |
|-----|------|
| 数量限制 | 保留最近50条 |
| 一键清空 | 清空所有历史记录 |
| 快速跳转 | 点击历史记录进入详情页 |
| 排序 | 按阅读时间倒序 |

#### 4.4.4 消息通知（替代推送）

**注意**：个人备案不使用主动推送，改为用户主动查看模式

| 消息类型 | 说明 | 提示方式 |
|---------|------|---------|
| 系统公告 | 平台功能更新、维护通知 | 红点提示 |
| 内容更新 | 订阅源有新内容 | 红点提示数量 |
| 活动提醒 | 用户关注的活动即将开始 | 红点提示 |

消息列表页面：
```
┌─────────────────────────────────┐
│ 消息通知 (3)        [全部已读]   │ 标题栏
├─────────────────────────────────┤
│ 🔴 新消息                       │ 未读
│  订阅源「教务处」更新了5篇内容   │ 内容
│  10分钟前                       │ 时间
├─────────────────────────────────┤
│ ⚪ 系统公告                     │ 已读
│  小程序将于今晚23:00进行维护     │ 内容
│  昨天 18:00                     │ 时间
└─────────────────────────────────┘
```

#### 4.4.5 设置页面

```
┌─────────────────────────────────┐
│  设置                            │ 标题
├─────────────────────────────────┤
│  👤 身份管理 >                   │ 切换用户角色
│  📏 字体大小 >                   │ 小/中/大
│  🌙 深色模式 >                   │ 关闭（预留）
│  🗑️ 清除缓存 >                   │ 清理本地数据
├─────────────────────────────────┤
│  ℹ️ 关于小程序                    │ 版本信息
│  📋 用户协议                      │ 协议页面
│  🔒 隐私政策                      │ 政策页面
│  📞 联系我们                      │ 反馈页面
└─────────────────────────────────┘
```

---

## 五、数据采集与处理方案

### 5.1 数据来源配置

由于个人备案的限制，采用以下合法数据来源：

```javascript
// 数据源配置示例
const dataSources = [
    {
        id: 'jwc_website',
        name: '教务处官网',
        type: 'website',
        url: 'https://jwc.example.edu.cn/notice',
        method: 'rss', // RSS订阅
        updateInterval: 3600000, // 1小时
        enabled: true
    },
    {
        id: 'library_official',
        name: '图书馆',
        type: 'website',
        url: 'https://lib.example.edu.cn/rss',
        method: 'rss',
        updateInterval: 3600000,
        enabled: true
    },
    {
        id: 'manual_entry',
        name: '手动录入',
        type: 'manual',
        updateInterval: 0,
        enabled: true
    }
];
```

### 5.2 数据采集流程

```
定时触发（每小时）
    ↓
检查数据源配置
    ↓
获取数据 (RSS/API/手动)
    ↓
数据预处理
    ↓
调用AI处理 (Moonshot API)
    ├─ 提取标题
    ├─ 提取正文
    ├─ 生成摘要
    ├─ 提取时间
    └─ 生成标签
    ↓
数据验证
    ├─ AI置信度 >= 80% → 直接入库
    └─ AI置信度 < 80% → 进入待审核队列
    ↓
更新索引和统计
    ↓
完成
```

### 5.3 Moonshot API集成

```javascript
// AI处理云函数示例
async function processArticleWithAI(content) {
    const response = await fetch('https://api.moonshot.cn/v1/chat/completions', {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${process.env.MOONSHOT_API_KEY}`,
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            model: 'moonshot-v1-8k',
            messages: [
                {
                    role: 'system',
                    content: `你是一个校园信息提取助手，需要从文章中提取结构化信息。
请以JSON格式返回，包含以下字段：
- title: 文章标题
- content: 清理后的正文内容
- summary: 100-200字的摘要
- publishTime: 发布时间（时间戳）
- tags: 提取的标签数组（最多5个）
- category: 一级分类（通知公告/学术动态/社团活动/生活服务）
- roleTags: 角色标签数组（本科生/研究生/教职工/通用）
- urgency: 紧急程度（high/medium/low）
- confidence: AI处理置信度（0-100）`
                },
                {
                    role: 'user',
                    content: content
                }
            ],
            temperature: 0.3
        })
    });

    const data = await response.json();
    return JSON.parse(data.choices[0].message.content);
}
```

### 5.4 异常处理机制

| 异常类型 | 处理方式 | 通知 |
|---------|---------|------|
| API调用失败 | 重试3次，间隔1分钟 | 记录日志 |
| AI置信度低 | 进入待审核队列 | 管理员后台提醒 |
| 数据格式错误 | 跳过该条，记录错误 | 记录日志 |
| 网络超时 | 跳过本次采集，下次重试 | 记录日志 |

### 5.5 更新时效

| 内容类型 | 更新频率 | 截止时间 |
|---------|---------|---------|
| 常规通知 | 每小时 | T+0（当天采集当天可见） |
| 紧急通知 | 10分钟 | 支持手动插队即时发布 |
| 活动信息 | 每小时 | 活动结束后自动归档 |
| 招聘信息 | 每天凌晨2点 | 招聘截止后归档 |

---

## 六、视觉设计规范

### 6.1 色彩系统

| 用途 | 色值 | 十六进制 | 用途场景 |
|-----|------|---------|---------|
| 主色-午夜蓝 | rgb(10,37,64) | #0A2540 | 标题、重要按钮、导航栏 |
| 背景白 | rgb(247,249,250) | #F7F9FA | 页面背景 |
| 强调色-极光青 | rgb(0,212,170) | #00D4AA | 收藏按钮、成功状态 |
| 分割线-冰灰 | rgb(232,236,241) | #E8ECF1 | 分割线、边框 |
| 文字-深灰 | rgb(74,85,104) | #4A5568 | 正文文字 |
| 文字-浅灰 | rgb(160,174,192) | #A0AEC0 | 辅助信息 |
| 紧急红 | rgb(239,68,68) | #EF4444 | 紧急标签 |
| 警告橙 | rgb(249,115,22) | #F97316 | 本周截止标签 |
| 提示黄 | rgb(234,179,8) | #EAB308 | 即将开始标签 |

### 6.2 字体规范

| 层级 | 字号 | 字重 | 颜色 | 行高 | 使用场景 |
|-----|------|------|------|------|---------|
| H1-大标题 | 20px | 600 | #0A2540 | 1.4 | 页面标题 |
| H2-副标题 | 18px | 600 | #0A2540 | 1.4 | 模块标题 |
| H3-卡片标题 | 16px | 600 | #0A2540 | 1.4 | 信息卡片标题 |
| Body-正文 | 14px | 400 | #4A5568 | 1.6 | 正文内容 |
| Caption-辅助 | 12px | 400 | #A0AEC0 | 1.5 | 时间、来源等 |

### 6.3 组件设计

**信息卡片**
```css
.article-card {
    background: #FFFFFF;
    border-radius: 8px;
    padding: 16px;
    margin: 8px 16px;
    box-shadow: 0 2px 8px rgba(10,37,64,0.04);
    transition: all 0.2s ease;
}
.article-card:active {
    transform: scale(0.98);
    box-shadow: 0 1px 4px rgba(10,37,64,0.08);
}
```

**标签样式**
```css
.tag {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 400;
    margin-right: 8px;
    margin-bottom: 8px;
}
.tag-source {
    background: #E8ECF1;
    color: #4A5568;
}
.tag-urgent-high {
    background: #FEE2E2;
    color: #EF4444;
}
.tag-urgent-medium {
    background: #FFEDD5;
    color: #F97316;
}
.tag-role {
    background: #DBEAFE;
    color: #1E40AF;
}
```

**按钮规范**
```css
/* 主按钮 */
.btn-primary {
    background: #00D4AA;
    color: #0A2540;
    border: none;
    border-radius: 8px;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
}

/* 次按钮 */
.btn-secondary {
    background: #E8ECF1;
    color: #0A2540;
    border-radius: 8px;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 400;
}
```

### 6.4 图标规范

- 风格：线性图标
- 描边宽度：1.5px
- 端点：圆角
- 填充：无填充
- 尺寸：16px、20px、24px

---

## 七、技术架构设计

### 7.1 技术栈选型

| 层级 | 技术选择 | 说明 |
|-----|---------|------|
| 前端框架 | uni-app | 跨平台，便于多端扩展 |
| UI组件库 | uni-ui | uni-app官方组件库 |
| 后端 | DCloud云开发 | 云函数 + 云数据库 + 云存储 |
| 数据库 | 云数据库 | 文档型NoSQL数据库 |
| AI服务 | Moonshot API | 文本处理和智能推荐 |
| API通信 | uni.request | HTTP请求 |

### 7.2 项目结构

```
My_School_Store_Tool/
├── pages/                    # 页面目录
│   ├── index/               # 首页
│   │   ├── index.vue
│   │   └── components/      # 首页组件
│   ├── discover/            # 发现页
│   ├── detail/              # 详情页
│   ├── mine/                # 我的页面
│   ├── collection/          # 收藏页
│   ├── history/             # 历史页
│   ├── message/             # 消息页
│   ├── settings/            # 设置页
│   └── login/               # 登录页
├── components/              # 公共组件
│   ├── ArticleCard.vue
│   ├── SearchBar.vue
│   ├── TabBar.vue
│   └── TagItem.vue
├── store/                   # 状态管理
│   ├── index.js
│   ├── user.js
│   └── article.js
├── utils/                   # 工具函数
│   ├── request.js           # 网络请求封装
│   ├── storage.js           # 本地存储封装
│   ├── format.js            # 格式化函数
│   └── ai.js                # AI调用封装
├── api/                     # API接口
│   ├── user.js
│   ├── article.js
│   ├── collection.js
│   └── system.js
├── static/                  # 静态资源
│   ├── images/
│   └── icons/
├── uniCloud/               # 云开发
│   ├── cloudfunctions/     # 云函数
│   │   ├── getArticles/
│   │   ├── login/
│   │   ├── collect/
│   │   ├── search/
│   │   ├── syncData/
│   │   └── processArticle/
│   └── database/           # 数据库schema
├── App.vue
├── main.js
├── manifest.json           # 应用配置
└── pages.json              # 页面配置
```

### 7.3 数据库设计

详见《数据库设计文档.md》

---

## 八、非功能性需求

### 8.1 性能要求

| 指标 | 目标值 | 测量方法 |
|-----|--------|---------|
| 首页加载时间 | < 1.5秒 | Performance API |
| 搜索响应时间 | < 500ms | 云函数日志 |
| 页面切换动画 | 流畅无卡顿 | 视觉检测 |
| 图片加载 | 懒加载 | 开发者工具 |

### 8.2 安全性要求

- 用户数据加密存储
- API接口防刷机制（限流）
- 敏感操作二次确认
- 站外链接跳转提示
- 用户隐私保护（符合微信小程序隐私规范）

### 8.3 兼容性要求

| 平台 | 最低版本 |
|-----|---------|
| 微信iOS | 7.0.0 |
| 微信Android | 7.0.0 |
| 微信开发者工具 | 最新稳定版 |

### 8.4 可维护性要求

- 代码注释覆盖率 > 30%
- 遵循ESLint代码规范
- 组件化开发，复用率 > 60%
- 配置文件与代码分离

---

## 九、验收标准

### 9.1 功能验收

| 功能模块 | 验收标准 |
|---------|---------|
| 用户登录 | 能正常获取用户信息，角色选择生效 |
| 信息流 | 三个角色展示内容有明显差异 |
| 搜索 | 搜索响应 < 500ms，结果准确率 > 80% |
| 收藏 | 收藏数据云端同步，换设备不丢失 |
| AI处理 | 至少支持5个数据源，自动化处理成功率 > 90% |
| 智能推荐 | 推荐内容与用户角色/历史相关 |

### 9.2 性能验收

- 首页加载时间 < 1.5秒
- 图片加载使用懒加载
- 列表滚动流畅无卡顿

### 9.3 兼容性验收

- 在iOS和Android上功能一致
- 在不同尺寸屏幕上显示正常

### 9.4 代码验收

- 通过ESLint检查
- 核心功能有单元测试
- 代码结构清晰，易于扩展

---

## 十、项目里程碑

| 阶段 | 工作内容 | 预计产出 |
|-----|---------|---------|
| 阶段一 | 搭建项目框架，完成基础页面 | 可运行的小程序框架 |
| 阶段二 | 完成首页和详情页开发 | 信息展示功能 |
| 阶段三 | 完成发现页和个人中心 | 全部页面功能 |
| 阶段四 | 集成云函数和AI处理 | 数据自动化处理 |
| 阶段五 | 性能优化和测试 | 可发布的版本 |

---

## 附录A：参考资料

- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [uni-app官方文档](https://uniapp.dcloud.net.cn/)
- [DCloud云开发文档](https://doc.dcloud.net.cn/uniCloud/)
- [Moonshot API文档](https://platform.moonshot.cn/docs/intro)
- [小程序隐私保护指引](https://developers.weixin.qq.com/miniprogram/dev/framework/user-privacy/)

---

## 附录B：变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|-----|------|---------|--------|
| v1.0 | 2024-02-09 | 初始版本 | - |
