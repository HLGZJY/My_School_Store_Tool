

校园信息聚合小程序开发需求描述
一、用户角色与权限体系
本应用面向三类用户，首次登录时必须选择角色，后续可在"我的-身份管理"中切换（限校内双身份人员）。
 在校学生，核心关注课程通知、社团活动、学术讲座和就业信息，内容推荐按专业、年级和兴趣标签精准推送。
 教师，核心关注教务通知、科研申报、学术会议和行政流程，内容推荐按院系、职称和研究方向精准推送。
 行政人员，核心关注校内公文、会议通知、政策文件和工作简报，内容推荐按部门职能和紧急程度排序。
二、信息分类体系
（一）一级分类
采用Tab切换形式，固定四个类别：
 通知公告：优先级排序为紧急通知、重要公告、一般通知。
 学术动态：包含讲座、会议、成果发布和科研申报。
 社团活动：包含招新、比赛、演出和志愿活动。
 生活服务：包含后勤、图书馆、就业、心理和医疗信息。
（二）二级分类
采用标签形式，包含三类标签：
 来源标签：具体到学校部门如教务处、团委、各学院和各个公众号。
 紧急标签：区分为置顶24小时、本周截止和即将开始。
 角色标签：区分为本科生、研究生和教职工。
每篇文章必须打上至少一个一级分类、一个来源标签和一个角色标签，用于后续筛选和推荐。
三、核心功能详细规格
（一）首页信息瀑布流
 顶部搜索框占位符显示"搜索通知、讲座、活动..."，支持关键词高亮显示、历史搜索记录和热搜词推荐。
 分类Tab横向滚动展示，固定显示四个一级分类，切换时刷新列表但保留当前分类浏览位置。
 信息卡片展示标题（最多两行截断）、来源、时间和标签，支持左滑快速收藏手势，点击进入详情页。
 智能推荐区置顶展示两条"猜你需要"内容，基于最近浏览记录、用户角色和时间敏感性推荐（例如临近期末优先推荐考试通知）。
 信息流支持下拉刷新和上拉加载更多，每次加载15条内容，按发布时间倒序排列。
（二）发现页聚合浏览
 热门排行模块展示近7天阅读量前20的文章，数据实时统计每小时更新。
 标签云模块展示高频标签，字号随频率放大，点击可筛选对应内容，基于已采集文章自动提取生成。
 时间轴模块按日期聚合展示，显示每日文章数量，支持展开收起操作，快速定位历史日期。
 订阅管理模块展示已订阅源列表，支持一键取消订阅和系统推荐订阅，订阅后该源新文章将优先推送。订阅源必须具体到具体学院官网或具体公众号名称，新增订阅源需经过管理员审核。
（三）详情页
 富文本渲染保留原文链接，原文内容使用接入moonshotAI api处理概括，提取标签。避免直接转载
 原文跳转按钮固定在底部，站外链接需二次确认防止诈骗。
 收藏功能点击心形图标触发，本地震动反馈，未登录时提示登录，收藏数据实时同步云端。
 相关推荐展示在底部"你可能还想看"区域，推荐3篇同分类、同标签且时间相近的文章。
（四）我的页面
 用户信息模块展示微信头像、昵称
 收藏夹模块支持分类筛选、搜索收藏内容和批量管理，按收藏时间倒序展示，支持下拉刷新。
 阅读历史模块展示最近浏览的50条记录，支持一键清空，点击可重新进入详情页。
 消息通知模块展示订阅更新提醒和系统公告，红点提示未读数量，支持一键标记已读。
 设置模块包含角色切换、字体大小调节、关于页面
四、自动化采集与处理技术方案
（一）网站端采集
 现状：使用EasySpider手动配置。
 新方案：采用配置生成器加定时调度，由Moonshot API分析网页DOM结构自动生成XPath规则，DCloud云函数定时触发执行，人工负责最终确认。
（二）公众号采集
 现状：手动筛选导出。
 新方案：待补充
（三）数据清洗
 现状：本地手动处理。
 新方案：改为云端AI管道，云函数触发后调用Moonshot API格式化提取标题、正文、时间，自动打标签后入库，实现全自动处理。
（四）异常处理
AI置信度低于80%的文章进入待审核队列，管理员确认后发布。
整套流程需实现T+0更新机制，当天采集内容第二天可见，紧急通知支持人工插队即时发布。
五、视觉风格设计规范
（一）色彩规范
 主色调：极地白F7F9FA（背景）、午夜蓝0A2540（主色）、极光青00D4AA（强调色，用于收藏和成功状态）、冰灰E8ECF1（辅助色，用于分割线）。
（二）文字层级
 标题：16px字重600的午夜蓝。
 正文：14px字重400的深灰色4A5568。
 辅助信息：12px字重400的浅灰色A0AEC0。
（三）卡片设计
采用纯白背景，圆角8像素，阴影参数为0 2px 8px rgba(10,37,64,0.04)。
（四）图标风格
采用线性图标，1.5像素描边，圆角端点，无填充效果。
（五）留白原则
卡片内边距16像素，页面左右边距16像素，元素间距12像素。
整体意象参考北极的宁静感和功能主义美学。
六、技术架构要求
 前端：uni-app框架（推荐uni-app便于后续多端扩展）。
 后端：基于DCloud云开发，使用云函数、云数据库和云存储。
 AI能力：由Moonshot API提供，负责文本解析、标签生成、摘要提取和推荐算法。
 数据采集：能够从网站端，特定学校通告发布页面；公众号端，特定学校公众号发布的文章。
 第三方服务集成：微信登录、微信消息订阅。
七、扩展性预埋设计
 文章表：预留vector向量字段用于后续AI语义搜索和智能问答。
 用户表：预留major、grade和research_field字段用于精准推送和同侪推荐。
 收藏表：预留folder_id字段用于收藏夹分类。
 全局配置：预留theme字段用于深色模式和多主题切换。
八、交付验收标准
 应用需支持至少5个网站源和5个公众号源的自动化采集。
 采集、清洗、入库全流程无需人工干预，异常情况除外。
 三种角色登录后首页信息流需呈现明显差异。
 搜索响应时间需低于500毫秒，结果相关性人工抽查准确率需高于80%。
 收藏数据需实现云端同步，换设备登录不丢失。
 代码结构需清晰规范，新增数据源只需修改配置文件即可。
